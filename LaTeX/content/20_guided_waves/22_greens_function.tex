\subsection{Green's Function}

\subsubsection{Scalar Green's Function}\label{sec:scal_green}

The Green's function describes the response of a linear differential operator $L$ to a point source of unit strength. It is explained briefly in the following with an example of solving the Poisson's equation with boundary conditions, since this concept will be used in further analysis. The general form for a Green's function of a given problem is 

\begin{equation}
    LG(\mathbf{x},\mathbf{x'}) = -\delta(\mathbf{x}-\mathbf{x'}).
    \label{eqn:general_greens_funct}
\end{equation}

A point source of unit strength is generally modeled with a delta function $\delta$ at a certain point in one-dimensional space. In multi-dimensional space, a product of delta-functions are used.

Once \autoref{eqn:general_greens_funct} is solved for a point source of unit strength, and the Green's function $G$ of this specific problem is known, it can be used to for any combination of point sources $f$ to solve for an input function $u$, 

\begin{equation}
    Lu(\mathbf{x}) = f(\mathbf{x}),
    \label{eqn:examplary_function_with_operator}
\end{equation}

This is done through superposition through point sources of unit strength, as in

\begin{equation}
    u(\mathbf{x})=\iiint_V G(\mathbf{x},\mathbf{x'})f(\mathbf{x'})dv'.
    \label{eqn:examplary_function_solved}
\end{equation}

The integrands are the source point variables $x', y', z'$. 

One application of the Green's function is solving the Poisson's equation. The scalar potential $\phi$ can be calculated from a density of charge distribution $\rho$ by using the Green's function of this specific problem. If there are no boundaries present, it takes the form 

\begin{subequations}
	\begin{equation}
		\nabla ^ 2 \phi = -\frac{\rho}{\epsilon},
		\label{eqn:greens_function_scalar_pot_1}
	\end{equation}
	\begin{equation}
		\phi(\mathbf{x}) = \frac{1}{4\pi\epsilon}\iiint_V\frac{\rho(\mathbf{x'})}{|\mathbf{x}-\mathbf{x'}|}dv',
		\label{eqn:greens_function_scalar_pot_2}
	\end{equation}
\end{subequations}

where $\epsilon$ is the permittivity of the medium.

The Green's function for this problem equals $G(\mathbf{x},\mathbf{x'}) = \frac{1}{4\pi |\mathbf{x}-\mathbf{x'|}}$, and represents the potential at position $\mathbf{x}$ created by an unit point charge at point $\mathbf{x'}$. In this case, the input function $u = \phi$ and the source function $f = -\rho / \epsilon_0$.

Different volumes of interest $V_1$, $V_2$, $...$, $V_n$ can be connected by applying boundary conditions on their surrounding surfaces $S_1$, $S_2$, $...$, $S_n$. \todo{This will become useful for the greens function in tem cell: Perturbed and unperturbed term connecting the upper and lower chamber} Applying Green's second identity on the Poisson's equation enables enforcing such a boundary condition upon the surrounding surface $S$ of a volume $V$, 

\begin{equation}
	\iiint_V \left(\phi \nabla_\mathbf{x'}^2 G - G \nabla_\mathbf{x'}^2 \phi \right) dv' = \oiint_S \left(G\frac{\partial \phi}{\partial \mathbf{n}} - \phi \frac{\partial G}{\partial \mathbf{n}}\right)d\mathbf{s'}.
\end{equation}

The vector $\mathbf{n}$ is normal to $S$. The operator $\nabla^2_\mathbf{x'}$ differentiates with respect to the source vector $\mathbf{x'}$ due to $x',y',z'$ being the integrands. Inserting $\nabla^2 \phi = -\rho / \epsilon$ from \autoref{eqn:greens_function_scalar_pot_1} and $\nabla^2 G = -\delta$ from \autoref{eqn:general_greens_funct} leads to 

\begin{equation}
	\phi = \frac{1}{\epsilon}\iiint_V \rho (\mathbf{x'})G(\mathbf{x},\mathbf{x'})\cdot dv'+\oiint_S\left(\phi \frac{\partial G }{\partial \mathbf{n}}-G\frac{\partial \phi}{\partial \mathbf{n}}\right)d\mathbf{s}'
\end{equation}

$\phi$ or its normal derivative to the surface $\partial\phi/\partial\mathbf{n}$ can be forced on the boundary. If only one of those two expressions is known on the boundary surface, the Green's function may be modified such that the unknown expression vanishes. If $\phi$ is defined on the whole boundary, it satisfies Dirichlet boundary conditions. On the other hand, if $\partial\phi/\partial\mathbf{n}$ is defined on the whole boundary, it satisfies Neumann boundary conditions \cite[pp. 55-59]{Collin_2015}.


%This enables an expansion of the fields in a waveguide excited by an internal source. The perfectly conducting surfaces of the waveguides mirror the source infinitely often. Therefore, the Green's function may be represented by a series of these mirror sources. In practice, these calculations are cumbersome, and only the most significant parts of the series are computed \cite{Collin_2015}. %Should I show mathematical calculations?


\subsubsection{Dyadic Green's Function}\label{sec:dyad_green}


While the scalar Green’s function is useful for solving one-dimensional differential equations, the dyadic Green’s function $\mathbf{\bar G}$
is more suitable for three-dimensional problems. It relates a vector source with a vector response, which is necessary when solving the Helmholtz equation in 

\begin{equation}
	\nabla^2\mathbf{A}+k^2\mathbf{A}=-\mu \mathbf{J}.
	\label{eqn:helmholtz}
\end{equation}


When replacing $\mu \mathbf{J}$ by an unit vector source $\left(\mathbf{\hat{a}}_x + \mathbf{\hat{a}}_y + \mathbf{\hat{a}}_z\right)\delta(\mathbf{x}-\mathbf{x'})$, the solution for $\mathbf{A}$ of \autoref{eqn:helmholtz} in free-space is  

\begin{equation}\label{eqn:sol_dyadic_green}
	(\mathbf{\hat{a}}_x + \mathbf{\hat{a}}_y + \mathbf{\hat{a}}_z) \frac{e^{-j k |\mathbf{x} - \mathbf{x'}|}}{4\pi |\mathbf{x} - \mathbf{x'}|}.
\end{equation}

This is a vector Green's Function by definition \cite[pp. 91-92]{Collin_2015}.

Each component of the current distribution $\mathbf{J}$ generates fields through a linear relation. This relationship can effectively be represented by dyadics, which are linear mappings between vectors. The dyadic Green's function is therefore introduced and defined as
\begin{align}
	\nonumber\mathbf{\bar{G}}=&G_{xx}\,\mathbf{\hat{a}}_x\mathbf{\hat{a}}_x+G_{xy}\,\mathbf{\hat{a}}_x\mathbf{\hat{a}}_y + G_{xz}\,\mathbf{\hat{a}}_x\mathbf{\hat{a}}_z+\\\nonumber
	&G_{yx}\,\mathbf{\hat{a}}_y\mathbf{\hat{a}}_x+G_{yy}\,\mathbf{\hat{a}}_y\mathbf{\hat{a}}_y + G_{yz}\,\mathbf{\hat{a}}_y\mathbf{\hat{a}}_z+\\\nonumber
	&G_{zx}\,\mathbf{\hat{a}}_z\mathbf{\hat{a}}_x+G_{zy}\,\mathbf{\hat{a}}_z\mathbf{\hat{a}}_y + G_{zz}\,\mathbf{\hat{a}}_z\mathbf{\hat{a}}_z
\end{align}

Each component of the current vector $\mathbf{J}$ is associated with one unit vector of the Green's function, i.e. $J_x$ with $\mathbf{\hat{a}_x}$, $J_y$ with $\mathbf{\hat{a}_y}$ and $J_z$ with $\mathbf{\hat{a}_z}$ \cite[p. 92]{Collin_2015}. Consequently, the field generated by a current component in a given direction is determined by the corresponding column of the dyadic Green’s function. For example, if only a current component $J_x$ is present, the field components $A_x$, $A_y$, and $A_z$ are obtained from the Green's functions elements $G_{xx}$, $G_{yx}$ and $G_{zx}$.

The dyadic Green's function is the solution to

\begin{equation}\label{eqn:helmholtz_green}
	\nabla^2 \mathbf{\bar G}(\mathbf{x}, \mathbf{x'}) + k^2 \mathbf{\bar G} = -\mathbf{\bar I} \delta(\mathbf{x} - \mathbf{x'}),
\end{equation}

and is described in free-space as \cite[p.92]{Collin_2015}

\begin{equation}\label{eqn:dyadic_final}
	\mathbf{\bar G}(\mathbf{r}, \mathbf{r}_0) = \mathbf{\bar I} \frac{e^{-jk|\mathbf{r} - \mathbf{r}_0|}}{4\pi |\mathbf{r} - \mathbf{r}_0|},
\end{equation}

where $\mathbf{\bar{I}}$ is an unit dyadic.

The fields $\mathbf{A}$ generated by arbitrary $\mathbf{J}$ can be expressed with the dyadic Green's function as

\begin{equation}
	\mathbf{A}(\mathbf{x}) = \mu \iiint_V \mathbf{\bar{G}}\left(\mathbf{x}, \mathbf{x'}\right)\mathbf{J}(\mathbf{x'})\,dv'.
\end{equation}

Each component of $\mathbf{J}$ drives a combination of components in $\mathbf{A}$. Dyadics capture this component-wise coupling and simplify the notation \cite[p. 92]{Collin_2015}.



\textit{The dyadic Green's Function is commonly applied to calculate field distributions in waveguides. In \cite{Wilson_1981} it is used to derive the fields in a TEM cell caused by a vertical current conducting wire with help of the small-gap approximation.}



